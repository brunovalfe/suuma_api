(function(e){function t(t){for(var r,i,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)i=o[d],s[i]&&p.push(s[i][0]),s[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},s={app:0},n=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var r=a("1356"),s=a.n(r);s.a},"05b2":function(e,t,a){"use strict";var r=a("e654"),s=a.n(r);s.a},"0bed":function(e,t,a){"use strict";var r=a("4d92"),s=a.n(r);s.a},1356:function(e,t,a){},"21d0":function(e,t,a){"use strict";var r=a("4b51"),s=a.n(r);s.a},"29d6":function(e,t,a){"use strict";var r=a("6e2a"),s=a.n(r);s.a},"37db":function(e,t,a){},"3e7e":function(e,t,a){"use strict";var r=a("f38f"),s=a.n(r);s.a},4678:function(e,t,a){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb718","./de-ch.js":"bb718","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=n(e);return a(t)}function n(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}s.keys=function(){return Object.keys(r)},s.resolve=n,e.exports=s,s.id="4678"},"4b51":function(e,t,a){},"4ba1":function(e,t,a){},"4c44":function(e,t,a){"use strict";var r=a("4ba1"),s=a.n(r);s.a},"4d92":function(e,t,a){},"4dd1":function(e,t,a){"use strict";var r=a("a897"),s=a.n(r);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),s=a("bb71");a("da64");r["a"].use(s["a"],{iconfont:"md"});var n=a("bc3a"),i=a.n(n),o="";o="http://ssintranet.iberomed.org/api";var l=i.a.create({baseURL:o});l.defaults.headers.common["Authorization"]="Bearer "+localStorage.getItem("app-suuma"),r["a"].prototype.$http=l;var c=a("f499"),u=a.n(c);function d(e){return JSON.parse(u()(e))}r["a"].prototype.$deepCopy=d;var p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a(e.layout,{tag:"component"},[a("router-view")],1)],1)},f=[],m=(a("c5f6"),a("cebc")),v=(a("96cf"),a("3b8d")),h=a("2f62"),b=a("d225"),g=a("b0b4"),x=a("04e1"),_=a.n(x),k=a("c1df"),y=a.n(k),w=function(){function e(t){Object(b["a"])(this,e),this.original=t,this.jwt=_()(t)}return Object(g["a"])(e,[{key:"getExpiration",value:function(){return y.a.unix(this.jwt.exp)}},{key:"getJWT",value:function(){return{decoded:this.jwt,original:this.original}}}]),e}(),j="default",C={data:function(){return{timer_fn:null}},created:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.isSessionActive();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),computed:Object(m["a"])({},Object(h["e"])({jwt:"jwt"}),{layout:function(){return(this.$route.meta.layout||j)+"-layout"}}),methods:{isSessionActive:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:""!=this.jwt?(t=new w(this.jwt),a=y()(y()()).isSameOrBefore(t.getExpiration()),a||Number.isNan(t.getExpiration())||this.$store.dispatch("unset_token")):this.$router.push("/login");case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},V=C,O=(a("034f"),a("2877")),A=a("6544"),$=a.n(A),R=a("7496"),T=Object(O["a"])(V,p,f,!1,null,null,null),S=T.exports;$()(T,{VApp:R["a"]});var E=a("bfb3"),M=a.n(E),P=a("bd86"),D=a("8c4f"),Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Main view")]),a("p",[e._v("Tiempo estimado: "+e._s(e._f("convertToHuman")(e.timeToExp)))])])},L=[],G=a("e814"),F=a.n(G),q={name:"main-window",created:function(){},filters:{convertToHuman:function(e){F()(e%1e3/100);var t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),r=Math.floor(e/36e5%24);return r=r<10?"0"+r:r,a=a<10?"0"+a:a,t=t<10?"0"+t:t,r+":"+a+":"+t}},data:function(){return{}},computed:Object(m["a"])({},Object(h["e"])({timeToExp:"timeToExp"})),methods:{}},z=q,N=Object(O["a"])(z,Y,L,!1,null,null,null),I=N.exports,U=(a("28a5"),a("6ee6"));r["a"].use(h["a"]);var B=r["a"].prototype.$http,H=new h["a"].Store({state:{alert:{appear:!1,type:"red",message:"Testing",timeout:4e3},toast:{appear:!1,color:"success",message:"I'm snackbar",title:"",timeout:6e3},loadingPage:{appear:!1,message:""},user:JSON.parse(localStorage.getItem("app-suuma-user"))||{},photo:{},timeToExp:0,jwt:localStorage.getItem("app-suuma")||"",version:"1.0"},getters:{isLoggedIn:function(e){return"undefined"!==typeof e.jwt&&"undefined"!=e.jwt&&null!=e.jwt&&""!=e.jwt},getRoles:function(e){return e.user.roles||[]}},mutations:{CHANGE_ALERT:function(e,t){e.alert.appear=t.appear||!1,e.alert.type=t.type||"red darken-5",e.alert.message=t.message||"",e.alert.timeout=t.timeout||4e3},SET_LOADING:function(e,t){e.loadingPage=t},SET_TOAST:function(e,t){e.toast.appear=t.appear||!1,e.toast.color=t.color||"success",e.toast.message=t.message||"",e.toast.title=t.title||"",e.toast.timeout=t.timeout||6e3},HIDE_TOAST:function(e){e.toast.appear=!1},subs_exp:function(e,t){e.timeToExp-=t},set_profile_photo:function(e,t){e.photo=t.photo},set_exp:function(e,t){e.timeToExp=t},auth_success:function(e,t){e.jwt=t.token,e.user=t.user},auth_error:function(e,t){e.alert.appear=!0,e.alert.message=u()(t)},auth_logout:function(e){e.alert.appear=!0,e.alert.message="Hasta la próxima."},auth_logout_err:function(e,t){e.alert.appear=!0,e.alert.message="Ocurrió un error. StackTrace:"+u()(t)}},actions:{isApiActive:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",B.get("/"));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),decode:function(e,t){Object(U["a"])(e);var a=new w(t);return a.getJWT().decoded},set_token:function(e,t){Object(U["a"])(e),localStorage.setItem("app-suuma",t.token),localStorage.setItem("app-suuma-user",u()(t.user)),B.defaults.headers.common["Authorization"]="Bearer "+t.token},unset_token:function(){localStorage.removeItem("app-suuma"),localStorage.removeItem("app-suuma-user"),delete B.defaults.headers.common["Authorization"],this.state.jwt="",this.state.user={},this.state.photo={}},error_handler:function(e,t){var a=e.commit,r=t.errorCode.split("_")[1],s="";switch(r){case"wrong-user-password":s="error";break;case"not-active":s="warning";break;default:s="error";break}a("auth_error",t.status+": "+t.message),a("CHANGE_ALERT",{appear:!0,type:s,message:t.status+": "+t.message})},toast_me:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t,a){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,r("SET_TOAST",{appear:a.appear||!1,color:a.color||"success",message:a.message||"",title:a.title||""}),window.setTimeout(function(){r("HIDE_TOAST")},a.timeout||6e3);case 3:case"end":return e.stop()}},e)}));function t(t,a){return e.apply(this,arguments)}return t}(),fetch_photo:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t,a){var r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,B.get("profile/photo");case 3:s=e.sent,r("set_profile_photo",{photo:s.data});case 5:case"end":return e.stop()}},e)}));function t(t,a){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t,a){var r,s,n,i,o,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,s=t.commit,e.prev=1,s("SET_LOADING",{appear:!0,message:"Trabajando..."}),e.next=5,B.post("/login",a);case 5:if(n=e.sent,200==n.data.statusCode){e.next=10;break}r("error_handler",n.data),e.next=21;break;case 10:return i=n.data.data||null,o=i.user.roles,delete i.user["groups"],this.state.user=i.user,this.state.roles=o,e.next=17,r("set_token",i);case 17:return s("auth_success",i),e.next=20,r("fetch_photo");case 20:""!==this.state.user.profile.photo&&null!==this.state.user.profile.photo||r("toast_me",{appear:!0,color:"grey darken-4",message:"Tienes imagen de perfil por defecto. Cámbiala por tu foto favorita."});case 21:e.next=34;break;case 23:if(e.prev=23,e.t0=e["catch"](1),void 0===e.t0.response){e.next=33;break}return l=e.t0.response.data,s("auth_error",e.t0.response.status+":"+l.message),s("CHANGE_ALERT",{appear:!0,message:e.t0.message}),e.next=31,r("unset_token");case 31:e.next=34;break;case 33:s("CHANGE_ALERT",{appear:!0,message:"No se puede conectar con la DB. Revise que el API esté encendida."});case 34:return e.prev=34,s("SET_LOADING",{appear:!1,message:""}),e.finish(34);case 37:case"end":return e.stop()}},e,this,[[1,23,34,37]])}));function t(t,a){return e.apply(this,arguments)}return t}(),refresh:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var a,r,s,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=t.commit,r=t.dispatch;try{s=B.post("/refresh"),n=s.data,r("set_token",n)}catch(i){console.log(i),a("auth_error",i),a("CHANGE_ALERT",{appear:!0,type:"red darken-4",message:i.response.data.message}),localStorage.removeItem("app-suuma"),qa.push("/login")}case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dispatch,r=t.commit,e.prev=1,e.next=4,B.get("/logout");case 4:e.sent,r("auth_logout"),a("unset_token"),this.state.user={},this.state.photo={},e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log(e.t0),r("auth_logout_err",e.t0);case 15:case"end":return e.stop()}},e,this,[[1,11]])}));function t(t){return e.apply(this,arguments)}return t}(),update_self_roles:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t,a){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,this.state.user.roles=a,e.next=4,r("set_token",{user:this.state.user,token:this.state.jwt});case 4:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()}}),J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-content",{staticClass:"pa-0"},[a("v-container",{attrs:{fluid:"fluid"}},[a("v-expansion-panel",{staticClass:"elevation-0 panel-suuma",attrs:{expand:""},model:{value:e.panels,callback:function(t){e.panels=t},expression:"panels"}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[a("p",{staticClass:"header-expansion"},[a("i",{staticClass:"fas fa-user"}),e._v("\n              Información básica\n            ")])])]},proxy:!0}])},[a("basic-info",{attrs:{personal:e.profile}})],1),a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[a("p",{staticClass:"header-expansion"},[a("i",{staticClass:"fas fa-book-medical"}),e._v("\n              Contacto de emergencia\n            ")])])]},proxy:!0}])},[a("emergency-contact",{attrs:{ec:e.ec}})],1),a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[a("p",{staticClass:"header-expansion"},[a("i",{staticClass:"fas fa-wrench"}),e._v("\n              Dirección\n            ")])])]},proxy:!0}])},[a("direction-info",{attrs:{direction:e.direction}})],1),a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[a("p",{staticClass:"header-expansion"},[a("i",{staticClass:"fas fa-building"}),e._v("\n              Facturación\n            ")])])]},proxy:!0}])},[a("fiscal-info",{attrs:{fiscal:e.fiscal}})],1),a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[a("p",{staticClass:"header-expansion"},[a("i",{staticClass:"fas fa-info-circle"}),e._v("\n              Extras\n            ")])])]},proxy:!0}])},[a("extras-info",{attrs:{extras:e.extras}})],1),a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[a("p",{staticClass:"header-expansion"},[a("i",{staticClass:"fas fa-wrench"}),e._v("\n              Avanzado\n            ")])])]},proxy:!0}])},[a("advanced-info")],1)],1)],1)],1)},X=[],Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-divider"),r("v-card",{staticClass:"mb-4 elevation-0"},[r("v-card-text",[r("v-layout",{attrs:{row:"","d-flex":"",wrap:"","pa-2":""}},[r("v-flex",{attrs:{xs12:"",md4:"","pa-2":""}},[r("v-list",{attrs:{"two-line":"",subheader:""}},[r("v-subheader",[e._v("General")]),r("v-list-tile",{attrs:{avatar:""}},[r("v-list-tile-avatar",[""===e.photo?r("img",{staticClass:"profilePhoto",attrs:{src:a("a163"),alt:"Foto de Perfil"}}):e._e(),r("img",{staticClass:"profilePhoto",attrs:{src:e.photo,alt:"Logo"}})]),r("v-list-tile-content",{on:{click:function(t){e.photoChanger=!0}}},[r("v-list-tile-title",[e._v("Foto de Perfil")]),r("v-list-tile-sub-title",[e._v("Click para cambiar")])],1)],1)],1)],1),r("v-flex",{attrs:{xs12:"",md4:""}},[r("v-subheader",[e._v("Personal")]),r("v-flex",{staticClass:"pa-2"},[r("v-form",{ref:"basic",attrs:{"lazy-validation":""},model:{value:e.forms.basic,callback:function(t){e.$set(e.forms,"basic",t)},expression:"forms.basic"}},[r("v-text-field",{attrs:{required:"",clearable:"",label:"Nombre(s)",rules:e.rules.name},model:{value:e.personal.name,callback:function(t){e.$set(e.personal,"name",t)},expression:"personal.name"}}),r("v-flex",{attrs:{"d-flex":""}},[r("v-text-field",{attrs:{xs6:"",required:"",clearable:"",label:"Apellido Paterno",rules:e.rules.appat},model:{value:e.personal.appat,callback:function(t){e.$set(e.personal,"appat",t)},expression:"personal.appat"}}),r("v-text-field",{attrs:{xs6:"",required:"",clearable:"",label:"Apellido Materno",rules:e.rules.apmat},model:{value:e.personal.apmat,callback:function(t){e.$set(e.personal,"apmat",t)},expression:"personal.apmat"}})],1),r("v-text-field",{attrs:{clearable:"",label:"CURP",rules:e.rules.CURP},model:{value:e.personal.CURP,callback:function(t){e.$set(e.personal,"CURP",t)},expression:"personal.CURP"}}),r("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-text-field",e._g({attrs:{required:"",label:"Fecha de nacimiento","prepend-icon":"event",hint:"DD/MM/AAAA",rules:e.rules.date},model:{value:e.personal.date_birth,callback:function(t){e.$set(e.personal,"date_birth",t)},expression:"personal.date_birth"}},a))]}}]),model:{value:e.datePicker,callback:function(t){e.datePicker=t},expression:"datePicker"}},[r("v-date-picker",{on:{input:function(t){e.datePicker=!1}},model:{value:e.dummyDate,callback:function(t){e.dummyDate=t},expression:"dummyDate"}})],1),r("v-select",{attrs:{required:"",items:e.blood_types,label:"Tipo de sangre"},model:{value:e.personal.blood_type,callback:function(t){e.$set(e.personal,"blood_type",t)},expression:"personal.blood_type"}})],1)],1)],1),r("v-flex",{attrs:{xs12:"",md4:""}},[r("v-form",{ref:"contact",attrs:{"lazy-validation":""},model:{value:e.forms.contact,callback:function(t){e.$set(e.forms,"contact",t)},expression:"forms.contact"}},[r("v-flex",{staticClass:"pa-2"},[r("v-subheader",[e._v("Contacto")]),r("v-text-field",{attrs:{clearable:"",required:"",label:"Celular",rules:e.rules.telephone,mask:"phone"},model:{value:e.personal.tel_contact,callback:function(t){e.$set(e.personal,"tel_contact",t)},expression:"personal.tel_contact"}}),r("v-text-field",{attrs:{clearable:"",label:"Otro teléfono",mask:"phone"},model:{value:e.personal.tel_contact_2,callback:function(t){e.$set(e.personal,"tel_contact_2",t)},expression:"personal.tel_contact_2"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{staticClass:"mr-4",attrs:{depressed:"",color:"primary"},on:{click:e.submit}},[e._v("Guardar")])],1)],1),r("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:e.photoChanger,callback:function(t){e.photoChanger=t},expression:"photoChanger"}},[r("v-card",{staticClass:"pa-2"},[r("v-card-title",{staticClass:"headline"},[e._v("Foto de perfil")]),r("v-card-text",{staticClass:"text-xs-center"},[r("h3",[e._v("Previsualización")]),r("br"),""===e.image.url?r("img",{staticClass:"profilePhoto",attrs:{src:e.photo,alt:"Foto de Perfil",height:"250"}}):r("img",{staticClass:"profilePhoto",attrs:{src:e.image.url,alt:"Logo",height:"250"}}),r("v-text-field",{attrs:{label:"Seleccione imagen","prepend-icon":"attach_file"},on:{click:e.pickFile},model:{value:e.image.name,callback:function(t){e.$set(e.image,"name",t)},expression:"image.name"}}),r("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/x-png, image/gif, image/jpeg"},on:{change:e.onFilePicked}}),r("v-divider"),r("v-subheader",[e._v("Condiciones")]),r("div",{staticClass:"text-xs-left"},[r("ul",[r("li",[e._v("Las dimensiones de la imagen no pueden pasar de 500px x 500px.")]),r("li",[e._v("Formatos aceptados: *.jpeg, *.gif, *.png")])])])],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{flat:""},on:{click:function(t){e.photoChanger=!1}}},[e._v("Cancelar")]),r("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.submitPhoto}},[e._v("Cambiar")])],1)],1)],1)],1)},W=[],K=(a("7f7f"),a("768b")),Z={name:"basic-info",props:{personal:{type:Object,default:function(){return{name:"",appat:"",apmat:"",CURP:"",date_birth:"",blood_type:"",tel_contact:"",tel_contact_2:""}}}},computed:Object(m["a"])({},Object(h["e"])({photo:"photo"})),data:function(){return{dialog:!1,photoChanger:!1,datePicker:!1,dummyDate:"",forms:{basic:!1,contact:!1},image:{name:"",url:"",file:"",dimensions:{h:"",w:""}},rules:{name:[function(e){return!!e||"El nombre es requerido"}],appat:[function(e){return!!e||"El A Paterno es requerido"}],apmat:[function(e){return!!e||"El A Materno es requerido"}],CURP:[function(e){return(e||"").length>8||"Más de 8 caracteres"}],telephone:[function(e){return!!e||"Un número de contacto al menos"}],date:[function(e){return!!e||"Fecha de nacimiento es obligatoria"}]},blood_types:["A+","A-","B+","B-","AB+","AB-","O+","O-","Desconocido"],menu:!1,menu2:!1,contacto:{e_nombre:"",e_appat:"",e_apmat:"",e_parentesco:"",e_telefono:""}}},watch:{dummyDate:function(e){this.personal.date_birth=this.formatDate(this.dummyDate)}},methods:{formatDate:function(e){if(!e)return null;var t=e.split("-"),a=Object(K["a"])(t,3),r=a[0],s=a[1],n=a[2];return"".concat(n,"/").concat(s,"/").concat(r)},submit:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==this.$refs.basic.validate()||!0!==this.$refs.contact.validate()){e.next=15;break}return e.prev=1,e.next=4,this.$http.patch("profile/"+this.personal.id+"/basic",this.personal);case 4:t=e.sent,a=t.data.data,this.$store.state.user.profile=a,this.$store.dispatch("toast_me",{appear:!0,title:"Información básica.",message:"Actualiza con éxito",color:"primary"}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log(e.t0);case 13:e.next=16;break;case 15:console.log("No están completas");case 16:case"end":return e.stop()}},e,this,[[1,10]])}));function t(){return e.apply(this,arguments)}return t}(),pickFile:function(){this.$refs.image.click()},onFilePicked:function(e){var t=this,a=e.target.files;if(void 0!==a[0]){if(this.image.name=a[0].name,this.image.name.lastIndexOf(".")<=0)return;var r=new FileReader;r.readAsDataURL(a[0]);var s=this.image.dimensions;r.onload=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){s.h=this.height,s.w=this.width}},r.addEventListener("load",function(){t.image.url=r.result,t.image.file=a[0]})}else this.image.name="",this.image.file="",this.image.url=""},submitPhoto:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.image.dimensions.h/this.image.dimensions.w===1){e.next=3;break}return console.log("No es cuadrada"),e.abrupt("return");case 3:return e.prev=3,t=new FormData,t.append("photo",this.image.file),this.$store.commit("SET_LOADING",{appear:!0,message:"Subiendo..."}),e.next=9,this.$http.post("profile/photo",t);case 9:a=e.sent,console.log(a),this.$store.commit("SET_LOADING",{appear:!1,message:""}),this.photoChanger=!1,this.$store.state.photo=this.image.url,this.image={name:"",dimensions:{h:"",w:""},file:null,url:""},e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](3),console.log(e.t0);case 20:case"end":return e.stop()}},e,this,[[3,17]])}));function t(){return e.apply(this,arguments)}return t}()}},ee=Z,te=(a("21d0"),a("8336")),ae=a("b0af"),re=a("99d9"),se=a("12b2"),ne=a("2e4b"),ie=a("169a"),oe=a("ce7e"),le=a("0e8f"),ce=a("4bd4"),ue=a("a722"),de=a("8860"),pe=a("ba95"),fe=a("c954"),me=a("5d23"),ve=a("e449"),he=a("b56d"),be=a("9910"),ge=a("e0c7"),xe=a("2677"),_e=Object(O["a"])(ee,Q,W,!1,null,null,null),ke=_e.exports;$()(_e,{VBtn:te["a"],VCard:ae["a"],VCardActions:re["a"],VCardText:re["b"],VCardTitle:se["a"],VDatePicker:ne["a"],VDialog:ie["a"],VDivider:oe["a"],VFlex:le["a"],VForm:ce["a"],VLayout:ue["a"],VList:de["a"],VListTile:pe["a"],VListTileAvatar:fe["a"],VListTileContent:me["a"],VListTileSubTitle:me["b"],VListTileTitle:me["c"],VMenu:ve["a"],VSelect:he["a"],VSpacer:be["a"],VSubheader:ge["a"],VTextField:xe["a"]});var ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-subheader",[e._v("Extras")]),a("v-flex",{attrs:{"pa-2":"","d-flex":""}},[a("v-form",{staticClass:"text-xs-center"},[a("p",{staticClass:"text-xs-left"},[e._v("Cambiar la contraseña actual:")]),a("v-text-field",{attrs:{rules:e.password.rules,label:"Contraseña","prepend-icon":"lock",clearable:"clearable",autocomplete:"autocomplete",type:"password"},model:{value:e.password.info,callback:function(t){e.$set(e.password,"info",t)},expression:"password.info"}}),a("v-spacer"),a("v-btn",{attrs:{color:"primary",depressed:""}},[e._v("Guardar")])],1)],1)],1)},we=[],je={data:function(){return{password:{info:"",rules:[]}}}},Ce=je,Ve=Object(O["a"])(Ce,ye,we,!1,null,null,null),Oe=Ve.exports;$()(Ve,{VBtn:te["a"],VFlex:le["a"],VForm:ce["a"],VSpacer:be["a"],VSubheader:ge["a"],VTextField:xe["a"]});var Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-divider"),a("v-card",{staticClass:"mb-4 elevation-0"},[a("v-card-text",[a("v-layout",{attrs:{row:"","d-flex":"",wrap:"","pa-2":""}},[a("v-flex",{attrs:{xs12:"","pa-2":""}},[a("v-subheader",[e._v("Información de contacto")]),a("v-form",{ref:"emergency_contact",attrs:{"lazy-validation":""},model:{value:e.emergency_contact_form,callback:function(t){e.emergency_contact_form=t},expression:"emergency_contact_form"}},[a("v-flex",{attrs:{"d-flex":""}},[a("v-text-field",{attrs:{xs12:"",md4:"",required:"",clearable:"",label:"Nombre(s)",rules:e.rules.name},model:{value:e.ec.name,callback:function(t){e.$set(e.ec,"name",t)},expression:"ec.name"}}),a("v-text-field",{attrs:{xs12:"",md4:"",required:"",clearable:"",label:"Apellido Paterno",rules:e.rules.appat},model:{value:e.ec.appat,callback:function(t){e.$set(e.ec,"appat",t)},expression:"ec.appat"}}),a("v-text-field",{attrs:{xs12:"",md4:"",clearable:"",label:"Apellido Materno"},model:{value:e.ec.apmat,callback:function(t){e.$set(e.ec,"apmat",t)},expression:"ec.apmat"}})],1),a("v-flex",{attrs:{"d-flex":""}},[a("v-select",{attrs:{items:e.parentescos,label:"Parentesco"},model:{value:e.ec.relationship,callback:function(t){e.$set(e.ec,"relationship",t)},expression:"ec.relationship"}}),a("v-text-field",{attrs:{xs12:"",md6:"",required:"",clearable:"",rules:e.rules.telephone,label:"Telefono",mask:"phone"},model:{value:e.ec.telephone,callback:function(t){e.$set(e.ec,"telephone",t)},expression:"ec.telephone"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-4",attrs:{depressed:"",color:"primary"},on:{click:e.submit}},[e._v("Guardar")])],1)],1)],1)},$e=[],Re={name:"EmergencyContact",props:{ec:{type:Object,default:function(){return{id:"",name:"",appat:"",apmat:"",relationship:"",telephone:""}}}},data:function(){return{parentescos:["Padre/Madre","Pareja","Hermano","Hijo","Tio","Otro"],rules:{name:[function(e){return!!e||"Nombre es obligatorio"}],appat:[function(e){return!!e||"Apellido Paterno es obligatorio"}],relationship:[function(e){return!!e||"Imperativo saber parentesco"}],telephone:[function(e){return!!e||"Telefono es obligatorio"}]},emergency_contact_form:!1}},methods:{submit:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==this.$refs.emergency_contact.validate()){e.next=15;break}return e.prev=1,e.next=4,this.$http.patch("profile/"+this.ec.id+"/ec",this.ec);case 4:t=e.sent,a=t.data.data,this.$store.state.user.profile=a,this.$store.dispatch("toast_me",{appear:!0,title:"Contacto de Emergencia.",message:"Actualizado con éxito",color:"primary"}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log(e.t0);case 13:e.next=16;break;case 15:console.log("Aun hay faltantes");case 16:case"end":return e.stop()}},e,this,[[1,10]])}));function t(){return e.apply(this,arguments)}return t}()}},Te=Re,Se=Object(O["a"])(Te,Ae,$e,!1,null,null,null),Ee=Se.exports;$()(Se,{VBtn:te["a"],VCard:ae["a"],VCardActions:re["a"],VCardText:re["b"],VDivider:oe["a"],VFlex:le["a"],VForm:ce["a"],VLayout:ue["a"],VSelect:he["a"],VSpacer:be["a"],VSubheader:ge["a"],VTextField:xe["a"]});var Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-divider"),a("v-card",{staticClass:"mb-4 elevation-0"},[a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:"","d-flex":"","pa-2":""}},[a("v-flex",{attrs:{xs12:"","pa-2":""}},[a("v-subheader",[e._v("Dirección Personal")]),a("v-form",{ref:"direction_form",attrs:{"lazy-validation":""}},[a("v-flex",{attrs:{"d-flex":""}},[a("v-text-field",{attrs:{xs12:"",md6:"",required:"",clearable:"",label:"Calle y número",rules:e.rules.street},model:{value:e.direction.street,callback:function(t){e.$set(e.direction,"street",t)},expression:"direction.street"}}),a("v-select",{attrs:{items:e.states,required:"",label:"Estado"},model:{value:e.direction.state,callback:function(t){e.$set(e.direction,"state",t)},expression:"direction.state"}})],1),a("v-flex",{attrs:{"d-flex":""}},[a("v-text-field",{attrs:{xs12:"",md6:"",required:"",clearable:"",label:"Colonia",rules:e.rules.suburb},model:{value:e.direction.suburb,callback:function(t){e.$set(e.direction,"suburb",t)},expression:"direction.suburb"}}),a("v-text-field",{attrs:{xs12:"",md6:"",required:"",clearable:"",label:"Código Postal",rules:e.rules.postal_code},model:{value:e.direction.postal_code,callback:function(t){e.$set(e.direction,"postal_code",t)},expression:"direction.postal_code"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-4",attrs:{depressed:"",color:"primary"},on:{click:e.submit}},[e._v("Guardar")])],1)],1)],1)},Pe=[],De={name:"Direction",props:{direction:{type:Object,default:function(){return{id:"",street:"",state:"",suburb:"",postal_code:""}}}},methods:{submit:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==this.$refs.direction_form.validate()){e.next=16;break}return e.prev=1,e.next=4,this.$http.patch("profile/"+this.direction.id+"/direction",this.direction);case 4:t=e.sent,a=t.data.data,console.log(a),this.$store.state.user.profile=a,this.$store.dispatch("toast_me",{appear:!0,title:"Dirección. ",message:"Actualizada con éxito",color:"primary"}),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log(e.t0);case 14:e.next=17;break;case 16:console.log("Aun hay faltantes");case 17:case"end":return e.stop()}},e,this,[[1,11]])}));function t(){return e.apply(this,arguments)}return t}()},data:function(){return{states:["CDMX","Aguascalientes","Baja California","Baja California Sur","Campeche","Chiapas","Chihuahua","Coahuila","Colima","Durango","Estado de México","Guanajuato","Guerrero","Hidalgo","Jalisco","Michoacán","Morelos","Nayarit","Nuevo León","Oaxaca","Puebla","Querétaro","Quintana Roo","San Luis Potosí","Sinaloa","Sonora","Tabasco","Tamaulipas","Tlaxcala","Veracruz","Yucatán","Zacatecas"],rules:{street:[function(e){return!!e||"Calle y número obligatorios"}],state:[function(e){return!!e||"Estado obligatorio"}],suburb:[function(e){return!!e||"Colonia obligatoria"}],postal_code:[function(e){return!!e||"Código postal obligatorio"}]}}}},Ye=De,Le=Object(O["a"])(Ye,Me,Pe,!1,null,null,null),Ge=Le.exports;$()(Le,{VBtn:te["a"],VCard:ae["a"],VCardActions:re["a"],VCardText:re["b"],VDivider:oe["a"],VFlex:le["a"],VForm:ce["a"],VLayout:ue["a"],VSelect:he["a"],VSpacer:be["a"],VSubheader:ge["a"],VTextField:xe["a"]});var Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-divider"),a("v-card",{staticClass:"mb-4 elevation-0"},[a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:"","d-flex":"","pa-2":""}},[a("v-flex",{attrs:{xs12:"","pa-2":""}},[a("v-subheader",[e._v("Fiscal")]),a("p",{staticClass:"ma-2"},[e._v("Este apartado puede quedar vacío sino desea agregar información para facturación.")]),a("v-form",{ref:"fiscal_form",attrs:{"lazy-validation":""}},[a("v-flex",{attrs:{"d-flex":""}},[a("v-text-field",{attrs:{xs12:"",md6:"",clearable:"",label:"Razón Social"},model:{value:e.fiscal.business_name,callback:function(t){e.$set(e.fiscal,"business_name",t)},expression:"fiscal.business_name"}}),a("v-text-field",{attrs:{xs12:"",md6:"",clearable:"",label:"Dirección"},model:{value:e.fiscal.direction,callback:function(t){e.$set(e.fiscal,"direction",t)},expression:"fiscal.direction"}})],1),a("v-flex",{attrs:{"d-flex":""}},[a("v-text-field",{attrs:{xs12:"",md6:"",clearable:"",label:"RFC"},model:{value:e.fiscal.RFC,callback:function(t){e.$set(e.fiscal,"RFC",t)},expression:"fiscal.RFC"}}),a("v-text-field",{attrs:{xs12:"",md6:"",clearable:"",label:"Email",rules:[function(e){return/.+@.+/.test(e)||"Ingresa un correo válido"}],type:"email"},model:{value:e.fiscal.email,callback:function(t){e.$set(e.fiscal,"email",t)},expression:"fiscal.email"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-4",attrs:{depressed:"",color:"primary"},on:{click:e.submit}},[e._v("Guardar")])],1)],1)],1)},qe=[],ze={name:"Direction",props:{fiscal:{type:Object,default:function(){return{id:"",business_name:"",direction:"",RFC:"",email:""}}}},methods:{submit:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,a,r,s,n,i,o,l,c,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=null!=this.fiscal.business_name||""==this.fiscal.business_name,a=null!=this.fiscal.direction||""==this.fiscal.direction,r=null!=this.fiscal.RFC||""==this.fiscal.RFC,s=null!=this.fiscal.email||""==this.fiscal.email,console.log(t,a,r,s),t||a||r||s||this.$store.dispatch("toast_me",{appear:!0,message:"Sin facturación.",color:"gray darken-5"}),n=t?1:0,i=a?1:0,o=r?1:0,l=s?1:0,c=n+i+o+l,0==c){e.next=15;break}if(!(c<4&&c>0)){e.next=15;break}return this.$store.dispatch("toast_me",{appear:!0,title:"Forma modificada.",message:"Si se modifica algo, complete la forma de facturación.",color:"error"}),e.abrupt("return");case 15:return e.prev=15,console.log(this.fiscal),e.next=19,this.$http.patch("profile/"+this.fiscal.id+"/fiscal",this.fiscal);case 19:u=e.sent,d=u.data.data,console.log(d),this.$store.state.user.profile=d,this.$store.dispatch("toast_me",{appear:!0,title:"Facturación. ",message:"Actualizada con éxito",color:"primary"}),e.next=29;break;case 26:e.prev=26,e.t0=e["catch"](15),console.log(e.t0);case 29:case"end":return e.stop()}},e,this,[[15,26]])}));function t(){return e.apply(this,arguments)}return t}()},data:function(){return{rules:{}}}},Ne=ze,Ie=Object(O["a"])(Ne,Fe,qe,!1,null,null,null),Ue=Ie.exports;$()(Ie,{VBtn:te["a"],VCard:ae["a"],VCardActions:re["a"],VCardText:re["b"],VDivider:oe["a"],VFlex:le["a"],VForm:ce["a"],VLayout:ue["a"],VSpacer:be["a"],VSubheader:ge["a"],VTextField:xe["a"]});var Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-divider"),a("v-card",{staticClass:"mb-4 elevation-0"},[a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:"","d-flex":"","pa-2":""}},[a("v-flex",{attrs:{xs12:"","pa-2":""}},[a("v-subheader",[e._v("Información complementaria")]),a("v-form",{ref:"extras_form",attrs:{"lazy-validation":""}},[a("v-flex",{attrs:{"d-flex":"",xs12:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{attrs:{"persistent-hint":"",hint:"Generación SUUMA",reverse:"",solo:"",dense:"",flat:"",value:e.extras.generation,items:e.generations,label:"Generación"},model:{value:e.extras.generation,callback:function(t){e.$set(e.extras,"generation",t)},expression:"extras.generation"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{required:"",label:"Fecha de vencimiento BLS","prepend-icon":"event",hint:"DD/MM/AAAA",rules:e.rules.date},model:{value:e.extras.exp_BLS,callback:function(t){e.$set(e.extras,"exp_BLS",t)},expression:"extras.exp_BLS"}},r))]}}]),model:{value:e.datePicker,callback:function(t){e.datePicker=t},expression:"datePicker"}},[a("v-date-picker",{attrs:{xs12:"",md6:"",type:"month"},on:{input:function(t){e.datePicker=!1}},model:{value:e.dummyDate,callback:function(t){e.dummyDate=t},expression:"dummyDate"}})],1)],1)],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-4",attrs:{depressed:"",color:"primary"},on:{click:e.submit}},[e._v("Guardar")])],1)],1)],1)},He=[],Je=(a("ac6a"),a("75fc")),Xe={name:"Extras",props:{extras:{type:Object,default:function(){return{id:"",generation:"",exp_BLS:""}}}},data:function(){return{datePicker:!1,dummyDate:"",rules:{date:[function(e){return!!e||"Fecha de nacimiento es obligatoria"}]}}},computed:{generations:function(){return Object(Je["a"])(Array(50).keys()).reverse()}},watch:{dummyDate:function(e){this.extras.exp_BLS=this.formatDate(this.dummyDate)}},methods:{formatDate:function(e){if(!e)return null;var t=e.split("-"),a=Object(K["a"])(t,3),r=a[0],s=a[1],n=a[2];return n=void 0===n?1:n,"".concat(n,"/").concat(s,"/").concat(r)},submit:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==this.$refs.extras_form.validate()){e.next=16;break}return e.prev=1,e.next=4,this.$http.patch("profile/"+this.extras.id+"/extras",this.extras);case 4:t=e.sent,a=t.data.data,console.log(a),this.$store.state.user.profile=a,this.$store.dispatch("toast_me",{appear:!0,title:"Extras. ",message:"Actualizado con éxito.",color:"primary"}),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log(e.t0);case 14:e.next=17;break;case 16:console.log("Aun hay faltantes");case 17:case"end":return e.stop()}},e,this,[[1,11]])}));function t(){return e.apply(this,arguments)}return t}()}},Qe=Xe,We=Object(O["a"])(Qe,Be,He,!1,null,null,null),Ke=We.exports;$()(We,{VBtn:te["a"],VCard:ae["a"],VCardActions:re["a"],VCardText:re["b"],VDatePicker:ne["a"],VDivider:oe["a"],VFlex:le["a"],VForm:ce["a"],VLayout:ue["a"],VMenu:ve["a"],VSelect:he["a"],VSpacer:be["a"],VSubheader:ge["a"],VTextField:xe["a"]});var Ze={name:"ProfileComponent",components:{"basic-info":ke,"advanced-info":Oe,"emergency-contact":Ee,"direction-info":Ge,"fiscal-info":Ue,"extras-info":Ke},created:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchProfile();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{profile:{},panels:[!0,!1,!1,!1,!1,!1]}},computed:{ec:function(){return{id:this.profile.id,name:this.profile.ec_name,appat:this.profile.ec_appat,apmat:this.profile.ec_apmat,relationship:this.profile.ec_relationship,telephone:this.profile.ec_telephone}},direction:function(){return{id:this.profile.id,street:this.profile.dir_street,state:this.profile.dir_state,suburb:this.profile.dir_col,postal_code:this.profile.dir_pc}},fiscal:function(){return{id:this.profile.id,business_name:this.profile.fis_business_name,direction:this.profile.fis_dir_fiscal,RFC:this.profile.fis_RFC,email:this.profile.fis_email}},extras:function(){return{id:this.profile.id,generation:F()(this.profile.generation),exp_BLS:this.profile.BLS_exp}}},methods:{fetchProfile:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.get("profile");case 3:t=e.sent,this.profile=t.data.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}()}},et=Ze,tt=(a("eaf7"),a("a523")),at=a("549c"),rt=a("cd55"),st=a("49e2"),nt=Object(O["a"])(et,J,X,!1,null,"6750e1f3",null),it=nt.exports;$()(nt,{VContainer:tt["a"],VContent:at["a"],VExpansionPanel:rt["a"],VExpansionPanelContent:st["a"]});var ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("router-view")],1)},lt=[],ct={name:"Aprobar"},ut=ct,dt=Object(O["a"])(ut,ot,lt,!1,null,null,null),pt=dt.exports,ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-content",{staticClass:"pa-0"},[a("v-data-table",{staticClass:"elevation-0 suuma-table",attrs:{headers:e.headers,items:e.usuarios,"item-key":"id"},scopedSlots:e._u([{key:"no-data",fn:function(){return[a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v("No hay usuarios por aprobar")])]},proxy:!0},{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-left"},[e._v("\n        "+e._s(t.item.email)+"\n        "),t.item.email===e.myEmail.email?[a("v-icon",{attrs:{color:"red",right:""}},[e._v("star")])]:e._e()],2),a("td",{staticClass:"text-xs-center"},[a("v-flex",{attrs:{xs12:"",sm6:"","d-flex":""}},[a("v-select",{attrs:{disabled:"admin@suuma.com.mx"===t.item.email,items:e.ranges},model:{value:t.item.range,callback:function(a){e.$set(t.item,"range",a)},expression:"props.item.range"}})],1)],1),a("td",{staticClass:"text-xs-center"},[a("v-checkbox",{staticClass:"align-center justify-center",attrs:{"hide-details":"",disabled:"admin@suuma.com.mx"===t.item.email},model:{value:t.item.instructor,callback:function(a){e.$set(t.item,"instructor",a)},expression:"props.item.instructor"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-checkbox",{staticClass:"align-center justify-center",attrs:{disabled:"admin@suuma.com.mx"===t.item.email,"hide-details":""},model:{value:t.item.operator,callback:function(a){e.$set(t.item,"operator",a)},expression:"props.item.operator"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-checkbox",{staticClass:"align-center justify-center",attrs:{disabled:"admin@suuma.com.mx"===t.item.email,"hide-details":""},model:{value:t.item.service_chief,callback:function(a){e.$set(t.item,"service_chief",a)},expression:"props.item.service_chief"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-switch",{staticClass:"align-center justify-center",attrs:{disabled:"admin@suuma.com.mx"===t.item.email,"hide-details":""},model:{value:t.item.isActive,callback:function(a){e.$set(t.item,"isActive",a)},expression:"props.item.isActive"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-btn",{attrs:{small:"",depressed:"",color:"info",disabled:!t.item.changed},on:{click:function(a){return e.patch(t.item.id)}}},[e._v("Guardar")])],1),a("td",{staticClass:"text-xs-center"},[a("v-btn",{staticClass:"white--text",attrs:{small:"",depressed:"",color:"green darken-1",disabled:"admin@suuma.com.mx"===t.item.email},on:{click:function(a){return e.fetchGroups(t.item)}}},[e._v("Roles")])],1)]}}])}),e.groups.length>0?a("div",[a("role-dialog",{key:e.workingUser.id,attrs:{open:e.rolesDialog,started_roles:e.groups,user_info:e.workingUser},on:{updateGroups:e.updateGroups,dismiss:e.closeAndClean}})],1):e._e()],1)},mt=[],vt=a("5d73"),ht=a.n(vt),bt=a("a4bb"),gt=a.n(bt),xt=(a("6c7b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[a("v-card",{staticClass:"pa-2"},[a("v-card-title",{staticClass:"headline"},[e._v("Usuario ("+e._s(e.user_info.email)+")")]),a("v-card-text",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",[e._v("\n            A continuación, elige los roles que puede tener el usuario. Por defecto, todos son\n            "),a("strong",[e._v("usuarios básicos.")])]),a("h4",{staticClass:"mb-2"},[e._v("Roles actuales:")])]),a("v-flex",{staticClass:"mb-3"},e._l(e.selected_roles,function(t){return a("v-chip",{key:t.name,attrs:{color:"blue","text-color":"white"}},[a("v-avatar",{staticClass:"blue darken-4"},[e._v(e._s(t.role.slice(0,1).toUpperCase()))]),e._v("\n            "+e._s(t.role)+"\n          ")],1)}),1),a("v-flex",{attrs:{xs12:""}},[a("h4",{staticClass:"mb-2"},[e._v("Roles disponibles:")]),a("v-combobox",{attrs:{items:e.items,label:"Roles disponibles",chips:"","small-chips":"",clearable:"","prepend-icon":"supervised_user_circle",solo:"",multiple:"","item-text":"role","item-value":"name"},scopedSlots:e._u([{key:"selection",fn:function(t){return[a("v-chip",{attrs:{selected:t.selected,color:"grey lighten-4",close:""},on:{input:function(a){return e.remove(t.item)}}},[a("v-avatar",{staticClass:"grey lighten-1"},[e._v(e._s(t.item.role.slice(0,1).toUpperCase()))]),a("strong",[e._v(e._s(t.item.role))]),e._v(" \n                "),a("span",[e._v("("+e._s(t.item.name)+")")])],1)]}}]),model:{value:e.selected_roles,callback:function(t){e.selected_roles=t},expression:"selected_roles"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",flat:""},on:{click:e.closeDialog}},[e._v("Close")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.updateRoles}},[e._v("Save")])],1)],1)],1)}),_t=[],kt={name:"RoleDialog",props:{open:{type:Boolean,default:!1},started_roles:{type:Array,default:function(){return[]}},user_info:{type:Object,default:function(){return{id:0}}}},data:function(){return{selected_roles:[],items:[{name:"basic",role:"Básico"},{name:"service_chief",role:"Jefe de Servicio"},{name:"operator",role:"Operador"},{name:"training",role:"Capacitación"},{name:"director",role:"Director"},{name:"operational_director",role:"Director Operacional"},{name:"operational_personel",role:"Personal Operativo"},{name:"admin",role:"Administrador"}]}},created:function(){this.selected_roles=this.started_roles},methods:{remove:function(e){this.selected_roles.splice(this.selected_roles.indexOf(e),1),this.selected_roles=Object(Je["a"])(this.selected_roles)},closeDialog:function(){this.$emit("dismiss")},updateRoles:function(){this.$emit("updateGroups",this.selected_roles)}}},yt=kt,wt=a("8212"),jt=a("cc20"),Ct=a("2b5d"),Vt=Object(O["a"])(yt,xt,_t,!1,null,null,null),Ot=Vt.exports;$()(Vt,{VAvatar:wt["a"],VBtn:te["a"],VCard:ae["a"],VCardActions:re["a"],VCardText:re["b"],VCardTitle:se["a"],VChip:jt["a"],VCombobox:Ct["a"],VDialog:ie["a"],VFlex:le["a"],VLayout:ue["a"],VSpacer:be["a"]});var At={components:{"role-dialog":Ot},created:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("SET_LOADING",{appear:!0,message:"Obteniendo usuarios..."}),e.next=3,this.fetchUsers();case 3:this.$store.commit("SET_LOADING",{appear:!1,message:""});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{tipos_usuarios:["Admin","Operador"],ranges:["TAM","CP"],headers:[{text:"Correo",value:"email",sortable:!1,align:"left"},{text:"Rango",value:"aprobar",sortable:!1,align:"center",width:"1%"},{text:"Instructor",value:"instructor",sortable:!1,align:"center"},{text:"Operador",value:"operator",sortable:!1,align:"center"},{text:"Jefe de Servicio",value:"service_chief",sortable:!1,align:"center"},{text:"Activar",value:"approve",sortable:!1,align:"center"},{text:"Acciones",value:"save",sortable:!1,align:"center"},{text:"Avanzado",value:"advanced",sortable:!1,align:"center"}],usuarios:[],usuariosCopy:[],rolesDialog:!1,workingUser:{},groups:[],defaultGroups:[{name:"basic",role:"Básico"},{name:"service_chief",role:"Jefe de Servicio"},{name:"operator",role:"Operador"},{name:"training",role:"Capacitación"},{name:"director",role:"Director"},{name:"operational_director",role:"Director Operacional"},{name:"operational_personel",role:"Personal Operativo"},{name:"admin",role:"Administrador"}]}},computed:Object(m["a"])({},Object(h["e"])({myEmail:"user"})),watch:{usuarios:{handler:function(e){var t=this;if(0!=e.length){var a=new Array(this.usuarios.length).fill(0),r=0;e.forEach(function(s){var n=gt()(s);for(var i in n)e[r][n[i]]!==t.usuariosCopy[r][n[i]]&&"changed"!=n[i]&&(a[r]+=1);r+=1}),r=0;var s=!0,n=!1,i=void 0;try{for(var o,l=ht()(a);!(s=(o=l.next()).done);s=!0){var c=o.value;this.usuarios[r].changed=0!=c,r+=1}}catch(u){n=!0,i=u}finally{try{s||null==l.return||l.return()}finally{if(n)throw i}}}},deep:!0}},methods:{patch:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=0,this.usuarios.some(function(e,r){if(e.id===t)return a=r,!0}),e.prev=2,e.next=5,this.$http.patch("approvals/users/"+t,this.usuarios[a]);case 5:r=e.sent,r.data.data,this.usuarios[a].changed=!1,this.usuariosCopy[a]=this.$deepCopy(this.usuarios[a]),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0);case 14:case"end":return e.stop()}},e,this,[[2,11]])}));function t(t){return e.apply(this,arguments)}return t}(),fetchUsers:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.get("approvals/users");case 3:if(t=e.sent,t.data.data.length>0){for(a in t.data.data)t.data.data[a].changed=!1,t.data.data[a].instructor=1==t.data.data[a].instructor,t.data.data[a].operator=1==t.data.data[a].operator,t.data.data[a].service_chief=1==t.data.data[a].service_chief,t.data.data[a].isActive=1==t.data.data[a].isActive;this.usuarios=t.data.data,this.usuariosCopy=this.$deepCopy(t.data.data)}e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),fetchGroups:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var a,r,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.id,this.workingUser=t,e.next=5,this.$http.get("/profile/"+a+"/groups");case 5:r=e.sent,this.groups=[],r.data.data.forEach(function(e){var t={name:e.name,role:s.defaultGroups.filter(function(t){return t.name==e.name})[0].role};s.groups.push(t)}),this.rolesDialog=!0,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));function t(t){return e.apply(this,arguments)}return t}(),updateGroups:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.patch("profile/"+this.workingUser.id+"/groups",{groups:t});case 2:if(a=e.sent,this.$store.state.user.email!==this.workingUser.email){e.next=8;break}return r=[],a.data.data.forEach(function(e){r.push(e.name)}),e.next=8,this.$store.dispatch("update_self_roles",r);case 8:this.$store.dispatch("toast_me",{appear:!0,title:"Información básica.",message:"Roles actualizados con éxito",color:"primary"}),this.closeAndClean();case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),closeAndClean:function(){this.workingUser={},this.groups=[],this.rolesDialog=!1}}},$t=At,Rt=(a("4c44"),a("0798")),Tt=a("ac7c"),St=a("8fea"),Et=a("132d"),Mt=a("b73d"),Pt=Object(O["a"])($t,ft,mt,!1,null,null,null),Dt=Pt.exports;$()(Pt,{VAlert:Rt["a"],VBtn:te["a"],VCheckbox:Tt["a"],VContent:at["a"],VDataTable:St["a"],VFlex:le["a"],VIcon:Et["a"],VSelect:he["a"],VSwitch:Mt["a"]});var Yt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Lt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("h1",[e._v("Acerca de")])])}],Gt={components:{}},Ft=Gt,qt=Object(O["a"])(Ft,Yt,Lt,!1,null,null,null),zt=qt.exports,Nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-content",[a("v-container",{attrs:{fluid:"fluid","fill-height":"fill-height"}},[a("v-layout",{attrs:{"align-center":"align-center","justify-center":"justify-center"}},[a("v-flex",{attrs:{xs12:"xs12",sm12:"sm12",md6:""}},[a("v-card",[a("v-toolbar",{staticClass:"elevation-0",attrs:{dark:"dark",color:"red darken-2"}},[a("v-toolbar-title",[e._v("Registro")])],1),a("v-form",{ref:"register_form",attrs:{"lazy-validation":""},model:{value:e.isValid,callback:function(t){e.isValid=t},expression:"isValid"}},[a("v-container",[a("v-layout",{staticClass:"register",attrs:{row:"row",wrap:"wrap"}},[a("v-flex",[a("p",[e._v("Por favor ingresa los datos solicitados. Tu registro queda sujeto a aprobación.")])]),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:e.name.rules,label:"Nombre",clearable:"clearable",autocomplete:"name",required:""},model:{value:e.name.info,callback:function(t){e.$set(e.name,"info",t)},expression:"name.info"}})],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:e.appat.rules,label:"Apellido Paterno",clearable:"clearable",autocomplete:"last-name",required:""},model:{value:e.appat.info,callback:function(t){e.$set(e.appat,"info",t)},expression:"appat.info"}})],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:e.apmat.rules,label:"Apellido Materno",clearable:"clearable",autocomplete:"last-name",required:""},model:{value:e.apmat.info,callback:function(t){e.$set(e.apmat,"info",t)},expression:"apmat.info"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{attrs:{rules:e.email.rules,label:"Correo",clearable:"clearable",autocomplete:"new-email",required:""},model:{value:e.email.info,callback:function(t){e.$set(e.email,"info",t)},expression:"email.info"}})],1),a("v-flex",{attrs:{xs12:"xs12",sm6:"sm6"}},[a("v-text-field",{attrs:{rules:e.password.rules,label:"Contraseña",type:"password",clearable:"clearable",autocomplete:"new-password",required:""},model:{value:e.password.info,callback:function(t){e.$set(e.password,"info",t)},expression:"password.info"}})],1),a("v-flex",{attrs:{xs12:"xs12",sm6:"sm6"}},[a("v-text-field",{attrs:{rules:e.password_repeat.rules,label:"Repite tu contraseña",type:"password",clearable:"clearable",autocomplete:"new-password",required:""},model:{value:e.password_repeat.info,callback:function(t){e.$set(e.password_repeat,"info",t)},expression:"password_repeat.info"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"","d-flex":""}},[a("v-select",{attrs:{hint:e.range.selected.state+", "+e.range.selected.abbr,items:e.range.hints,"item-text":"state","item-value":"abbr","persistent-hint":"","return-object":"","single-line":"",label:"Rango",required:""},model:{value:e.range.selected,callback:function(t){e.$set(e.range,"selected",t)},expression:"range.selected"}})],1),a("v-flex",[a("v-checkbox",{staticClass:"aceptar",attrs:{rules:[function(e){return!!e||"Aceptar para continuar"}],required:""},scopedSlots:e._u([{key:"label",fn:function(){return[a("div",{staticClass:"in-label"},[e._v("\n                        Estoy de acuerdo con el\n                        "),a("router-link",{attrs:{to:"/aviso"}},[a("a",[e._v("aviso de privacidad")])]),e._v(".\n                      ")],1)]},proxy:!0}]),model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-flex",[a("div",{staticClass:"text-xs-center"},[a("v-btn",{staticClass:"elevation-0",attrs:{id:"enviar",color:"primary"},on:{click:e.submit}},[e._v("Enviar")])],1)]),a("br"),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("div",{staticClass:"text-xs-center"},[a("p",[e._v("\n                        Ya tengo cuenta,\n                        "),a("router-link",{staticClass:"btn_login",attrs:{to:"/login"}},[e._v("Iniciar sesión")])],1)])])],1)],1)],1)],1)],1)],1)],1)],1)],1)},It=[],Ut=function(){function e(t,a,r,s,n,i,o){Object(b["a"])(this,e),this.email=t,this.password=a,this.range=r,this.check_privacy=s,this.name=n,this.appat=i,this.apmat=o}return Object(g["a"])(e,[{key:"toJSON",value:function(){var e=1==this.check_privacy?1:0;return{email:this.email,password:this.password,range:this.range,check_privacy:e,name:this.name,appat:this.appat,apmat:this.apmat}}}]),e}(),Bt={name:"RegisterPage",data:function(){var e=this;return{isValid:!0,name:{info:"",rules:[function(e){return!!e||"El nombre es requerido"}]},appat:{info:"",rules:[function(e){return!!e||"El Apellido Paterno es requerido"}]},apmat:{info:"",rules:[function(e){return!!e||"El Apellido Materno es requerido"}]},email:{info:"",rules:[function(e){return!!e||"El correo es requerido"},function(e){return/.+@.+/.test(e)||"Ingresa un email válido"}]},password:{info:"",rules:[function(e){return!!e||"La contraseña es requerida"},function(e){return/^(?=.*\d).{4,12}$/.test(e)||"Una contraseña debe al menos contener un número"}]},password_repeat:{info:"",rules:[function(t){return e.password.info===e.password_repeat.info||"Las contraseñas deben coincidir"}]},range:{selected:{state:"Técnico en Atención Médica",abbr:"TAM"},hints:[{state:"Técnico en Atención Médica",abbr:"TAM"},{state:"Cadete en Prácticas",abbr:"CP"}]},checkbox:!1}},methods:Object(m["a"])({},Object(h["d"])({changeAlert:"CHANGE_ALERT",setLoading:"SET_LOADING"}),{submit:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.$refs.register_form.validate()){e.next=2;break}return e.abrupt("return");case 2:return this.setLoading({appear:!0,message:"Trabajando..."}),t=new Ut(this.email.info,this.password.info,this.range.selected.abbr,this.checkbox,this.name.info,this.appat.info,this.apmat.info),e.prev=4,e.next=7,this.$http.post("/register",t.toJSON());case 7:a=e.sent,a&&("ERROR"==a.status?this.errorHandler(a):this.successRegistered()),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),this.errorHandler(e.t0);case 14:return e.prev=14,this.setLoading({appear:!1,message:""}),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[4,11,14,17]])}));function t(){return e.apply(this,arguments)}return t}(),errorHandler:function(e){var t=e.response.data.message;this.changeAlert({appear:!0,type:"info",message:t,timeout:3e3}),this.email.info="",this.password.info="",this.password_repeat.info=""},successRegistered:function(){var e=this;this.setLoading({appear:!0,message:"Trabajando..."}),setTimeout(function(){e.setLoading({appear:!0,message:"Registro exitoso."})},1e3),setTimeout(function(){e.setLoading({appear:!1,message:""}),e.$router.push("login")},3e3)}})},Ht=Bt,Jt=(a("7247"),a("71d9")),Xt=a("2a7f"),Qt=Object(O["a"])(Ht,Nt,It,!1,null,null,null),Wt=Qt.exports;$()(Qt,{VBtn:te["a"],VCard:ae["a"],VCheckbox:Tt["a"],VContainer:tt["a"],VContent:at["a"],VFlex:le["a"],VForm:ce["a"],VLayout:ue["a"],VSelect:he["a"],VTextField:xe["a"],VToolbar:Jt["a"],VToolbarTitle:Xt["b"]});var Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-content",[a("v-container",{attrs:{fluid:"fluid","fill-height":"fill-height"}},[a("v-layout",{attrs:{"align-center":"align-center","justify-center":"justify-center"}},[a("v-flex",{attrs:{xs12:"xs12",sm8:"sm8",md4:"md4"}},[a("v-card",[a("v-toolbar",{staticClass:"elevation-0",attrs:{dark:"dark",color:"red darken-2"}},[a("v-toolbar-title",[e._v("Iniciar sesión")])],1),a("v-form",{ref:"login_form",attrs:{"lazy-validation":""},model:{value:e.isValid,callback:function(t){e.isValid=t},expression:"isValid"}},[a("v-container",[a("v-layout",{staticClass:"login",attrs:{wrap:"",row:""}},[a("v-flex",[a("v-text-field",{attrs:{rules:e.user.rules,label:"Correo","prepend-icon":"person",clearable:"clearable",autocomplete:"email",type:"email"},model:{value:e.user.info,callback:function(t){e.$set(e.user,"info",t)},expression:"user.info"}})],1),a("v-flex",{staticClass:"flex_sesion"},[a("v-text-field",{attrs:{rules:e.password.rules,label:"Contraseña","prepend-icon":"lock",clearable:"clearable",autocomplete:"autocomplete",type:"password"},model:{value:e.password.info,callback:function(t){e.$set(e.password,"info",t)},expression:"password.info"}})],1)],1)],1)],1),a("v-layout"),a("v-layout",[a("v-flex",[a("p",{staticClass:"text-md-center"},[a("v-btn",{staticClass:"elevation-0",attrs:{id:"enviar",dark:"dark",color:"red"},on:{click:e.submit}},[e._v("Entrar")])],1)])],1),a("v-layout",[a("v-flex",[a("p",{staticClass:"text-lg-center NUsuario"},[e._v("\n                ¿Nuevo usuario?.\n                "),a("em"),a("router-link",{attrs:{to:"/registro"}},[a("a",{staticClass:"ctr"},[e._v("Regístrate aquí")])])],1)])],1)],1)],1)],1)],1)],1)},Zt=[],ea=function(){function e(t,a){Object(b["a"])(this,e),this.email=t,this.password=a}return Object(g["a"])(e,[{key:"toJSON",value:function(){return{email:this.email,password:this.password}}}]),e}(),ta={name:"LoginPage",data:function(){return{isValid:!0,user:{info:"",rules:[function(e){return!!e||"El correo es requerido"},function(e){return/.+@.+/.test(e)||"Ingresa un correo válido"}]},password:{info:"",rules:[function(e){return!!e||"La contraseña es requerida"}]}}},methods:Object(m["a"])({},Object(h["b"])({login:"login"}),{enter:function(){console.log("Se apretó el enter")},submit:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.$refs.login_form.validate()){e.next=2;break}return e.abrupt("return");case 2:return t=new ea(this.user.info,this.password.info),e.next=5,this.login(t.toJSON());case 5:""!==this.$store.state.jwt&&this.$router.push("/"),this.user.info="",this.password.info="";case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()})},aa=ta,ra=(a("825d"),Object(O["a"])(aa,Kt,Zt,!1,null,null,null)),sa=ra.exports;$()(ra,{VBtn:te["a"],VCard:ae["a"],VContainer:tt["a"],VContent:at["a"],VFlex:le["a"],VForm:ce["a"],VLayout:ue["a"],VTextField:xe["a"],VToolbar:Jt["a"],VToolbarTitle:Xt["b"]});var na=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-content",[r("v-container",{attrs:{"fill-height":"","grid-list-md":"","text-xs-center":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md8:""}},[r("h1",{staticClass:"text-xs-center"},[e._v("Error 404.")]),r("p",{staticClass:"text-xs-center"},[e._v("La página que estás buscando no existe.")]),r("p",{staticClass:"text-xs-center"},[r("a",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("Regresar")])]),r("div",{staticStyle:{display:"none"}},[r("p",[e._v("Special thanks to: https://giphy.com/stickers/loop-motion-graphics-Bp1hRvzni1hjyIoJpv")])]),r("img",{attrs:{src:a("89c2"),alt:"NotFound"}})])],1)],1)],1)},ia=[],oa={},la=oa,ca=(a("0bed"),Object(O["a"])(la,na,ia,!1,null,"0c306b5d",null)),ua=ca.exports;$()(ca,{VContainer:tt["a"],VContent:at["a"],VFlex:le["a"],VLayout:ue["a"]});var da=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-content",[r("v-container",{attrs:{"fill-height":"","grid-list-md":"","text-xs-center":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md8:""}},[r("h1",{staticClass:"text-xs-center"},[e._v("No autorizado.")]),r("p",{staticClass:"text-xs-center"},[e._v("Pide al administrador que te suba de nivel :).")]),r("p",{staticClass:"text-xs-center"},[r("a",{on:{click:function(t){return e.$router.push("/")}}},[e._v("Regresar")])]),r("div",{staticStyle:{display:"none"}},[r("p",[e._v("Special thanks to: https://giphy.com/stickers/loop-motion-graphics-Bp1hRvzni1hjyIoJpv")])]),r("img",{attrs:{src:a("89c2"),alt:"NotFound"}})])],1)],1)],1)},pa=[],fa={},ma=fa,va=(a("c13b"),Object(O["a"])(ma,da,pa,!1,null,"e69468d4",null)),ha=va.exports;$()(va,{VContainer:tt["a"],VContent:at["a"],VFlex:le["a"],VLayout:ue["a"]});var ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{wrap:""}},[e.groups.some(function(e){return"admin"===e})?a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:""}},[a("v-btn",{staticClass:"white--text",attrs:{small:"",outline:"",depressed:"",color:"blue"},on:{click:function(t){e.newGuardDialog=!0}}},[e._v("Nueva guardia")])],1):e._e(),a("v-layout",{staticClass:"mb-1"},[a("v-flex",{staticClass:"text-sm-left text-xs-center",attrs:{sm4:"",xs12:""}},[a("v-btn",{attrs:{depressed:"",flat:"",color:"info"},on:{click:function(t){return e.prev()}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("keyboard_arrow_left")]),e._v("Prev\n      ")],1)],1),a("v-flex",{staticClass:"text-xs-center",attrs:{sm4:"",xs12:""}},[a("h1",[e._v(e._s(e.actualMonth.charAt(0).toUpperCase()+e.actualMonth.slice(1))+" "+e._s(e.actualYear))])]),a("v-flex",{staticClass:"text-sm-right text-xs-center",attrs:{sm4:"",xs12:""}},[a("v-btn",{attrs:{depressed:"",flat:"",color:"blue"},on:{click:function(t){return e.next()}}},[e._v("\n        Next\n        "),a("v-icon",{attrs:{dark:"",right:""}},[e._v("keyboard_arrow_right")])],1)],1)],1),a("v-flex",{staticClass:"pl-4 pr-4",attrs:{xs12:""}},[a("v-sheet",{attrs:{height:"500"}},[a("v-calendar",{ref:"guard_calendar",attrs:{type:e.type,color:"primary",locale:"es-MX"},scopedSlots:e._u([{key:"day",fn:function(t){var r=t.date;return[a("div",{staticClass:"single-event"},[e._l(e.eventsMap[r],function(t,s){return[a("v-menu",{key:t.id,attrs:{"close-on-content-click":!1,disabled:e.isPast(t.date),"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(r){var s=r.on;return[t.time?e._e():a("div",e._g({directives:[{name:"ripple",rawName:"v-ripple"}],class:{"my-event":"event"===t.type,"my-guard":"guard"===t.type,event:!0,"disabled-guard":e.isPast(t.date),available:"available"===t.status,"medium-available":"few"===t.status,busy:"busy"===t.status}},s),[a("v-flex",{attrs:{"d-flex":""}},[a("strong",[e._v(e._s(t.title))]),t.participate?[a("v-icon",{staticClass:"icon-event"},[e._v("star")])]:e._e()],2)],1)]}}],null,!0),model:{value:t.open,callback:function(a){e.$set(t,"open",a)},expression:"event.open"}},[a("v-card",{key:t.id,attrs:{color:"grey lighten-4","min-width":"350px","max-width":"600px",flat:""}},[a("v-toolbar",{staticClass:"elevation-0",attrs:{depressed:"",color:"grey darken-3",dark:""}},[a("v-toolbar-title",["event"==t.type?[e._v("Evento")]:[e._v("Guardia")],a("strong",[e._v("("+e._s(t.title)+".)")]),a("small",[e._v("/"+e._s(t.date))])],2),a("v-spacer"),e.groups.some(function(e){return"admin"===e})?[a("v-btn",{attrs:{icon:"",flat:""}},[a("v-icon",[e._v("edit")])],1),a("v-btn",{attrs:{icon:"",fla:""},on:{click:function(a){e.confirmationDialog=!0,e.workingEvent=t}}},[a("v-icon",[e._v("delete_forever")])],1)]:e._e()],2),a("v-card-title",{attrs:{"primary-title":""}},[e.isPast(t.date)?e._e():["available"===t.status||"few"===t.status?[t.guard_user.some(function(t){return t.email===e.me.email})?e._e():[a("v-flex",{attrs:{xs12:""}},[a("v-subheader",[e._v("Nuevo tripulante")])],1),a("v-flex",{key:t.id,attrs:{xs8:"","pl-2":""}},[a("v-select",{attrs:{items:e.leftRoles(t),"return-object":"",label:"Rol","item-text":"name"},on:{change:function(t){return e.$forceUpdate()}},model:{value:t.competitor,callback:function(a){e.$set(t,"competitor",a)},expression:"event.competitor"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-btn",{key:t.id+s,attrs:{"pl-1":"",block:"",disabled:0===Object.keys(e.eventsMap[r][s].competitor).length,depressed:"",color:"primary"},on:{click:function(a){return e.subscribeGuard(t)}}},[e._v("Unirme")])],1)]]:e._e()],a("v-flex",{attrs:{xs12:""}},[a("v-subheader",{attrs:{xs12:""}},[e._v("Tripulación (Ocupación "+e._s(t.guard_user.length)+"/"+e._s(t.max_quota)+")")])],1),a("v-flex",{attrs:{xs12:"","pl-4":""}},[a("table",{attrs:{xs12:"",width:"100%"}},[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[e._v("Usuario")]),a("th",{staticStyle:{"text-align":"center"}},[e._v("Rol")])]),e._l(t.guard_user,function(t,r){return a("tr",{key:r},[a("td",[e._v(e._s(t.email))]),a("td",{staticStyle:{"text-align":"center"}},[e._v("\n                            "+e._s(e._f("crewName")(t.pivot.role))+"\n                            "),t.email===e.me.email?[a("strong",[e._v("(yo)")])]:e._e()],2)])})],2)]),a("v-flex",{attrs:{xs12:""}},[t.guard_user.some(function(t){return t.email===e.me.email})?[a("v-subheader",[e._v("Salir de la guardia")]),a("v-flex",{attrs:{"d-flex":"","pl-4":""}},[a("v-checkbox",{attrs:{label:"Entiendo las implicaciones de salirme de la guardia, haciendo llegar un correo."},on:{change:function(t){return e.$forceUpdate()}},model:{value:t.out,callback:function(a){e.$set(t,"out",a)},expression:"event.out"}}),a("v-btn",{attrs:{disabled:!t.out,depressed:"",color:"error"},on:{click:function(a){return e.unsubscribeGuard(t)}}},[e._v("Salir")])],1)]:e._e()],2)],2),a("v-card-actions")],1)],1)]})],2)]}}]),model:{value:e.start,callback:function(t){e.start=t},expression:"start"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:"","pl-4":"","pt-2":""}},[a("v-subheader",[e._v("Opciones de visualización")]),a("v-flex",{attrs:{xs12:""}},[a("v-checkbox",{attrs:{label:"Mostrar guardias"},model:{value:e.showGuards,callback:function(t){e.showGuards=t},expression:"showGuards"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-checkbox",{attrs:{label:"Mostrar eventos"},model:{value:e.showEvents,callback:function(t){e.showEvents=t},expression:"showEvents"}})],1)],1),a("new-guard",{attrs:{open:e.newGuardDialog},on:{dismiss:e.closeAndClean,save:e.saveNewGuard}}),a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.confirmationDialog,callback:function(t){e.confirmationDialog=t},expression:"confirmationDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("¿Borrar esta guardia?")]),a("v-card-text",[e._v(e._s(e._f("eventOrGuard")(e.workingEvent.type))+" "+e._s(e.workingEvent.date+" "+e.workingEvent.hour)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"success",depressed:""},on:{click:function(t){e.confirmationDialog=!1}}},[e._v("Disagree")]),a("v-btn",{attrs:{color:"error",depressed:""},on:{click:function(t){return e.deleteGuard(e.workingEvent.id)}}},[e._v("Agree")])],1)],1)],1)],1)},ga=[],xa=a("59ad"),_a=a.n(xa),ka=(a("a481"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[a("v-card",{staticClass:"pa-2"},[a("v-card-title",{staticClass:"headline"},[a("strong",[e._v(e._s(e.type.selected.name))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":"","pa-1":""}},[a("v-form",{ref:"guardForm",attrs:{"lazy-validation":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-subheader",[e._v("Tipo de evento")])],1),a("v-select",{attrs:{items:e.type.available,"prepend-icon":"event_available","item-text":"name","return-object":"",label:"Tipo",required:"",hint:"Se registra como guardia o evento y se puede filtrar en el calendario"},model:{value:e.type.selected,callback:function(t){e.$set(e.type,"selected",t)},expression:"type.selected"}}),a("v-flex",{attrs:{xs12:""}},[a("v-subheader",[e._v("General")])],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":20,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px",required:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{label:"Fecha de guardia","prepend-icon":"event",readonly:""},model:{value:e.guardDate,callback:function(t){e.guardDate=t},expression:"guardDate"}},r))]}}]),model:{value:e.datePickerOpen,callback:function(t){e.datePickerOpen=t},expression:"datePickerOpen"}},[a("v-date-picker",{on:{input:function(t){e.datePickerOpen=!1}},model:{value:e.guardDate,callback:function(t){e.guardDate=t},expression:"guardDate"}})],1)],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-menu",{ref:"timePicker",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.guardTime,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px",required:""},on:{"update:returnValue":function(t){e.guardTime=t},"update:return-value":function(t){e.guardTime=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{label:"Hora","prepend-icon":"access_time",readonly:""},model:{value:e.guardTime,callback:function(t){e.guardTime=t},expression:"guardTime"}},r))]}}]),model:{value:e.timePickerOpen,callback:function(t){e.timePickerOpen=t},expression:"timePickerOpen"}},[e.timePickerOpen?a("v-time-picker",{attrs:{"full-width":""},on:{"click:minute":function(t){return e.$refs.timePicker.save(e.guardTime)}},model:{value:e.guardTime,callback:function(t){e.guardTime=t},expression:"guardTime"}}):e._e()],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{hint:"Horas intermedias están permitidas. Ej. 1.5 hrs",label:"Duración",type:"number",suffix:"hrs",min:"0",rules:[function(e){return e>0||"La duración debe ser mayor a una hora"}],required:""},model:{value:e.duration,callback:function(t){e.duration=t},expression:"duration"}})],1),a("v-divider"),a("v-subheader",[e._v("Personal")]),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{items:e.c_operator,"prepend-icon":"event_seat",label:"Operador","return-object":"",hint:"Muestra solo los usuarios con bandera de operador"},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v(e._s(t.item.email))]}},{key:"item",fn:function(t){return[e._v("\n                  "+e._s(t.item.profile.name)+" "+e._s(t.item.profile.appat)+" ("+e._s(t.item.email)+")\n                  "),e.user.email===t.item.email?[a("v-icon",{attrs:{color:"red",right:""}},[e._v("star")])]:e._e()]}}]),model:{value:e.users.operator,callback:function(t){e.$set(e.users,"operator",t)},expression:"users.operator"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{items:e.c_service_chief,"prepend-icon":"accessibility_new","return-object":"",label:"Jefe de servicio",hint:"Muestra solo los usuarios con bandera de jefe de servicio"},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v(e._s(t.item.email))]}},{key:"item",fn:function(t){return[e._v("\n                  "+e._s(t.item.profile.name)+" "+e._s(t.item.profile.appat)+" ("+e._s(t.item.email)+")\n                  "),e.user.email===t.item.email?[a("v-icon",{attrs:{color:"red",right:""}},[e._v("star")])]:e._e()]}}]),model:{value:e.users.service_chief,callback:function(t){e.$set(e.users,"service_chief",t)},expression:"users.service_chief"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-subheader",[e._v("Tripulación")])],1),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{items:e.users.personel_quota,label:"Número de personal"},on:{change:function(t){e.extra=0,e.users.personel_selected=[]}},model:{value:e.users.personel,callback:function(t){e.$set(e.users,"personel",t)},expression:"users.personel"}})],1),e._l(e.users.personel,function(t){return a("v-flex",{key:t,attrs:{xs12:""}},[a("v-select",{attrs:{"prepend-icon":"face",label:"Personal "+t,items:e.c_personel[t-1],hint:"Mostrando todos los usuarios menos los elegidos previamente"},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v(e._s(t.item.email))]}},{key:"item",fn:function(t){return[e._v("\n                  "+e._s(t.item.profile.name)+" "+e._s(t.item.profile.appat)+" ("+e._s(t.item.email)+")\n                  "),e.user.email===t.item.email?[a("v-icon",{attrs:{color:"red",right:""}},[e._v("star")])]:e._e()]}}],null,!0),model:{value:e.users.personel_selected[t-1],callback:function(a){e.$set(e.users.personel_selected,t-1,a)},expression:"users.personel_selected[i - 1]"}})],1)}),a("v-divider"),a("v-flex",{attrs:{xs12:""}},[a("v-subheader",[e._v("Unidad")])],1),a("v-flex",{attrs:{xs8:"",md8:""}},[a("v-select",{attrs:{items:e.units.available,"prepend-icon":"local_shipping","item-text":"name","return-object":"",label:"Unidad",required:"",hint:"Mostrando las unidades activas."},model:{value:e.units.selected,callback:function(t){e.$set(e.units,"selected",t)},expression:"units.selected"}})],1),a("v-flex",{attrs:{xs4:"",md:""}},[a("v-text-field",{attrs:{hint:"Personas extra que podrían suscribirse",label:"Extras (Personal)",type:"number",max:3-e.users.personel,min:"0",disabled:3-e.users.personel==0,"prepend-icon":"group_add"},model:{value:e.extra,callback:function(t){e.extra=t},expression:"extra"}})],1),a("v-divider"),a("v-subheader",[e._v("Extras")]),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{name:"description",label:"Descripción del guardia/evento",counter:"",maxlength:"250",hint:"Breve descripción de lo que se va a realizar en la guardia/evento."},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),a("v-flex",[a("v-switch",{attrs:{label:"Habilita la suscripción a esta guardia."},model:{value:e.isActive,callback:function(t){e.isActive=t},expression:"isActive"}})],1)],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",flat:""},on:{click:e.closeDialog}},[e._v("Close")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.saveAndExit}},[e._v("Save")])],1)],1)],1)}),ya=[],wa=(a("2fdb"),a("6762"),{name:"NewGuardDialog",props:{open:{type:Boolean,default:!1}},data:function(){return{type:{available:[{name:"Evento",value:"event"},{name:"Guardia",value:"guard"}],selected:{name:"Guardia",value:"guard"}},guardDate:y()().format("YYYY-MM-DD"),datePickerOpen:!1,guardTime:y()().format("HH:mm"),timePickerOpen:!1,duration:0,description:"",units:{available:[],selected:[]},users:{globallyAvailable:[],operator:{},service_chief:{},personel:0,personel_quota:[0,1,2,3],personel_selected:[]},isActive:!1,extra:0}},computed:Object(m["a"])({},Object(h["e"])({user:"user"}),{still_available:function(){var e=[];return gt()(this.users.operator).length>0&&e.push(this.users.operator),gt()(this.users.service_chief).length>0&&e.push(this.users.service_chief),this.users.personel_selected.length>0&&this.users.personel_selected.forEach(function(t){e.push(t)}),this.users.globallyAvailable.filter(function(t){return e.includes(t)})},c_operator:function(){var e=this,t=this.still_available.filter(function(t){return t.email!=e.users.operator.email}),a=this.users.globallyAvailable.filter(function(e){return!t.includes(e)});return a.filter(function(e){return 1===e.operator}),a},c_service_chief:function(){var e=this,t=this.still_available.filter(function(t){return t.email!=e.users.service_chief.email}),a=this.users.globallyAvailable.filter(function(e){return!t.includes(e)});return a.filter(function(e){return 1===e.service_chief}),a},c_personel:function(){for(var e=this,t=[],a=function(a){var r=e.still_available;if("undefined"!==typeof e.users.personel_selected[a]){r=e.still_available.filter(function(t){return t.email!=e.users.personel_selected[a].email});var s=e.users.globallyAvailable.filter(function(e){return!r.includes(e)});t.push(s)}else t.push(e.users.globallyAvailable.filter(function(e){return!r.includes(e)}))},r=0;r<this.users.personel;r++)a(r);return t}}),created:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchUnits();case 2:return e.next=4,this.fecthUsers();case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updated:function(){},methods:{fetchUnits:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.get("units");case 3:t=e.sent,this.units.available=t.data.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),fecthUsers:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.get("guards/users");case 3:t=e.sent,this.users.globallyAvailable=t.data.data.filter(function(e){return"admin@suuma.com.mx"!=e.email}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),closeDialog:function(){this.clean(),this.$emit("dismiss")},saveAndExit:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.$refs.guardForm.validate()){e.next=2;break}return e.abrupt("return");case 2:t=[],a={type:this.type.selected.value,date:this.guardDate.replace(/\-/g,"/"),time:this.guardTime,duration:_a()(this.duration),unit_id:this.units.selected.id,max_quota:2+this.users.personel_selected.length+F()(this.extra),user_id:this.$store.state.user.id,description:this.description,isActive:this.isActive,crew:[]},gt()(this.users.operator).length>0&&t.push({role:"operator",id:this.users.operator.id}),gt()(this.users.service_chief).length>0&&t.push({role:"service_chief",id:this.users.service_chief.id}),this.users.personel_selected.length>0&&this.users.personel_selected.forEach(function(e){t.push({role:"personal",id:e.id})}),a.crew=t,this.$emit("save",a);case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),clean:function(){this.guardDate="",this.guardTime="",this.duration=0,this.units.selected={},this.extra=0,this.description="",this.users.operator={},this.users.service_chief={},this.users.personel=0,this.users.personel_selected=[]}}}),ja=wa,Ca=a("a844"),Va=a("c964"),Oa=Object(O["a"])(ja,ka,ya,!1,null,null,null),Aa=Oa.exports;$()(Oa,{VBtn:te["a"],VCard:ae["a"],VCardActions:re["a"],VCardText:re["b"],VCardTitle:se["a"],VContainer:tt["a"],VDatePicker:ne["a"],VDialog:ie["a"],VDivider:oe["a"],VFlex:le["a"],VForm:ce["a"],VIcon:Et["a"],VLayout:ue["a"],VMenu:ve["a"],VSelect:he["a"],VSpacer:be["a"],VSubheader:ge["a"],VSwitch:Mt["a"],VTextField:xe["a"],VTextarea:Ca["a"],VTimePicker:Va["a"]});a("282c");y.a.locale("es_MX");var $a={name:"GuardView",components:{"new-guard":Aa},filters:{crewName:function(e){var t="";switch(e){case"operator":t="Operador";break;case"service_chief":t="Jefe de servicio";break;case"personal":t="Personal";break;default:t="";break}return t},eventOrGuard:function(e){return"guard"===e?"Guardia":"Evento"}},data:function(){return{type:"month",actualMonth:y()().format("MMMM"),actualYear:y()().format("Y"),start:y()().format("YYYY-MM-DD"),newGuardDialog:!1,showEvents:!0,showGuards:!0,events:[],confirmationDialog:!1,workingEvent:{}}},computed:Object(m["a"])({},Object(h["c"])({groups:"getRoles"}),Object(h["e"])({me:"user"}),{eventsMap:function(){var e=this,t={};return this.events.forEach(function(a){a.title=[].concat(a.hour.split(":")[0])+" HRS",a.details=a.description,a.date=a.date.replace(/\//g,"-"),a.open=!1,a.participate=a.guard_user.some(function(t){return t.email===e.me.email}),a.competitor={},a.out=!1;var r=a.guard_user.length/_a()(a.max_quota);r<.5&&(a.status="available"),r>.5&&r<1&&(a.status="few"),1==r&&(a.status="busy"),e.showEvents&&"event"==a.type&&(t[a.date]=t[a.date]||[]).push(a),e.showGuards&&"guard"==a.type&&(t[a.date]=t[a.date]||[]).push(a)}),t},currentTime:function(){return y()(this.start,"YYYY-MM-DD")}}),created:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.setLoading({appear:!0,message:"Obteniendo guardias..."}),e.next=3,this.fetchUnits();case 3:return e.next=5,this.fetchGuards(y()().format("YYYY/MM/")+"01",y()().add(1,"M").format("YYYY/MM/")+"01");case 5:this.setLoading({appear:!1,message:""});case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:Object(m["a"])({},Object(h["d"])({setLoading:"SET_LOADING"}),{fetchUnits:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("units");case 2:t=e.sent,this.units=t.data.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),fetchGuards:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t,a){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("guards",{params:{initDate:t,lastDate:a}});case 2:r=e.sent,this.events=r.data.data;case 4:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),leftRoles:function(e){var t=[],a={operator:this.me.operator,service_chief:this.me.service_chief},r={operator:0,service_chief:0,personal:0};e.guard_user.forEach(function(e){r[e.pivot.role]=r[e.pivot.role]+1}),0===r.operator&&1===a.operator&&t.push({role:"operator",name:"Operador"}),0===r.service_chief&&1===a.service_chief&&t.push({role:"service_chief",name:"Jefe de servicio"});var s=F()(e.max_quota)-2-r.personal;return s>=1&&t.push({role:"personal",name:"Personal"}),t},isPast:function(e){return y()(e,"YYYY-MM-DD").isBefore(y()(),"day")},prev:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.setLoading({appear:!0,message:"Obteniendo guardias..."}),t=y()(this.start,"YYYY-MM-01"),a=y()(this.start,"YYYY-MM-01"),e.next=5,this.fetchGuards(a.subtract(1,"M").format("YYYY/MM/")+"01",t.format("YYYY/MM/")+"01");case 5:this.updateTime(this.currentTime.subtract(1,"M")),this.$refs.guard_calendar.prev(),this.setLoading({appear:!1,message:""});case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),next:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.setLoading({appear:!0,message:"Obteniendo guardias..."}),t=y()(this.start,"YYYY-MM-01").add(1,"M"),e.next=4,this.fetchGuards(t.format("YYYY/MM/")+"01",t.add(1,"M").format("YYYY/MM/")+"01");case 4:this.updateTime(this.currentTime.add(1,"M")),this.$refs.guard_calendar.next(),this.setLoading({appear:!1,message:""});case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updateTime:function(e){this.actualMonth=e.format("MMMM"),this.actualYear=e.format("Y")},open:function(e){alert(e.title)},subscribeGuard:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var a,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=this.me.id,r=t.id,this.setLoading({appear:!0,message:"Actualizando guardia..."}),e.next=5,this.$http.patch("guards/"+r+"/subscribe/"+a,{role:t.competitor.role,isActive:1});case 5:return e.sent,s=y()(this.start,"YYYY-MM-01"),e.next=9,this.fetchGuards(s.format("YYYY/MM/")+"01",s.add(1,"M").format("YYYY/MM/")+"01");case 9:this.setLoading({appear:!1,message:""});case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),unsubscribeGuard:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var a,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=this.me.id,r=t.id,this.setLoading({appear:!0,message:"Actualizando guardia..."}),e.next=5,this.$http.patch("guards/"+r+"/unsubscribe/"+a,{role:t.competitor.role,isActive:1});case 5:return e.sent,s=y()(this.start,"YYYY-MM-01"),e.next=9,this.fetchGuards(s.format("YYYY/MM/")+"01",s.add(1,"M").format("YYYY/MM/")+"01");case 9:this.setLoading({appear:!1,message:""});case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),saveNewGuard:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.setLoading({appear:!0,message:"Guardando guardia..."}),e.next=3,this.$http.post("guards",t);case 3:return e.sent,a=y()(this.start,"YYYY-MM-01"),e.next=7,this.fetchGuards(a.format("YYYY/MM/")+"01",a.add(1,"M").format("YYYY/MM/")+"01");case 7:this.setLoading({appear:!1,message:""}),this.closeAndClean();case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),deleteGuard:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.setLoading({appear:!0,message:"Eliminando guardia..."}),e.next=3,this.$http.post("guards/"+t);case 3:return a=e.sent,console.log(a),r=y()(this.start,"YYYY-MM-01"),e.next=8,this.fetchGuards(r.format("YYYY/MM/")+"01",r.add(1,"M").format("YYYY/MM/")+"01");case 8:this.setLoading({appear:!1,message:""}),this.confirmationDialog=!1,this.workingEvent={};case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),closeAndClean:function(){this.newGuardDialog=!1}})},Ra=$a,Ta=(a("05b2"),a("a4f6")),Sa=a("8dd9"),Ea=a("269a"),Ma=a.n(Ea),Pa=a("3ccf"),Da=Object(O["a"])(Ra,ba,ga,!1,null,null,null),Ya=Da.exports;$()(Da,{VBtn:te["a"],VCalendar:Ta["a"],VCard:ae["a"],VCardActions:re["a"],VCardText:re["b"],VCardTitle:se["a"],VCheckbox:Tt["a"],VDialog:ie["a"],VFlex:le["a"],VIcon:Et["a"],VLayout:ue["a"],VMenu:ve["a"],VSelect:he["a"],VSheet:Sa["a"],VSpacer:be["a"],VSubheader:ge["a"],VToolbar:Jt["a"],VToolbarTitle:Xt["b"]}),Ma()(Da,{Ripple:Pa["a"]}),r["a"].use(D["a"]);var La=new D["a"]({mode:"history",routes:[Object(P["a"])({path:"/",name:"Home",meta:{layout:"default"},component:I},"meta",{requiresAuth:!0,requiresAdmin:!1}),{path:"/perfil",name:"Perfil",component:it,meta:{requiresAuth:!0,requiresAdmin:!1}},{path:"/guardias",name:"Guardias",component:Ya,meta:{requiresAuth:!0,requiresAdmin:!1}},{path:"/aprobar",name:"Aprobaciones",component:pt,meta:{requiresAuth:!0,requiresAdmin:!0},children:[{path:"usuarios",name:"Aprobacion_usuarios",component:Dt,meta:{requiresAuth:!0,requiresAdmin:!0}}]},{path:"/acerca",name:"About",meta:{layout:"default",requiresAuth:!0},component:zt},{path:"/registro",name:"Registro",meta:{layout:"login"},component:Wt},{path:"/login",name:"Login",meta:{layout:"login"},component:sa},{path:"/404",name:"Not-Found",meta:{layout:"login"},component:ua},{path:"/401",name:"Unauthorized",meta:{layout:"login"},component:ha},{path:"*",redirect:"/404"}]});function Ga(){var e=new w(H.state.jwt),t=y()(),a=e.getExpiration(),r=y()(t).isSameOrBefore(a);r||M()(a)?(H.commit("set_exp",a.diff(t)),window.setTimeout(Fa,1e3)):H.dispatch("unset_token")}function Fa(){window.clearTimeout(r["a"].prototype.timer_fn),H.commit("subs_exp",1e3),r["a"].prototype.timer_fn=window.setTimeout(Fa,1e3)}La.beforeEach(function(e,t,a){if(H.commit("CHANGE_ALERT",{appear:!1}),e.matched.some(function(e){return e.meta.requiresAuth})){if(H.getters.isLoggedIn){if(Ga(),e.matched.some(function(e){return e.meta.requiresAdmin})){var r=H.getters.getRoles.some(function(e){return"admin"===e});0==r&&a("/401")}return void a()}a("/login")}a()}),r["a"].prototype.timer_fn=null;var qa=La,za=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"default"},[a("isLoading",{attrs:{value:e.loadingPage.appear,message:e.loadingPage.message}}),a("side-nav-bar"),a("v-content",[a("v-container",{staticClass:"mainView",attrs:{fluid:""}},[a("alert-nc",{attrs:{appear:e.alert_state.appear,alertType:e.alert_state.type,message:e.alert_state.message,timeout:e.alert_state.timeout}}),a("toast",{attrs:{appear:e.toast.appear,color:e.toast.color,text:e.toast.message,timeout:e.toast.timeout,title:e.toast.title}}),a("breadcrumb",{staticClass:"mt-2 ml-3 mb-0"}),a("router-view",{staticClass:"mainContent"})],1)],1)],1)},Na=[],Ia=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-toolbar",{staticClass:"white--text",attrs:{color:"red darken-4",dark:"dark",fixed:"fixed",app:"app","clipped-right":"clipped-right"}},[r("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),r("v-toolbar-title",[r("router-link",{staticClass:"white--text",staticStyle:{"text-decoration":"none"},attrs:{to:"/"}},[r("strong",[e._v("SUUMA")]),r("small",[e._v("v"+e._s(e.$store.state.version)+".0")])])],1),r("v-spacer"),r("v-toolbar-items",[r("v-tooltip",{attrs:{bottom:"bottom"},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[r("v-btn",{attrs:{flat:"flat",fab:"fab",dark:"dark",small:"small"},on:{click:e.logout}},[r("v-icon",{attrs:{dark:"dark"}},[e._v("close")])],1)]}}])},[r("span",[e._v("Cerrar sesión")])])],1)],1),r("v-navigation-drawer",{attrs:{fixed:"fixed",app:"app"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("v-list",[r("v-flex",{attrs:{"align-center":"align-center","justify-center":"justify-center",layout:"layout","text-xs-center":"text-xs-center"}},[r("v-avatar",{staticClass:"ma-2",attrs:{size:"200"}},[""===e.photo?r("img",{staticClass:"profilePhoto",attrs:{src:a("a163"),alt:"Foto de Perfil"}}):e._e(),r("img",{staticClass:"profilePhoto",attrs:{src:e.photo,alt:"Logo"}})])],1),e.user.profile?r("div",{staticClass:"text-xs-center"},[r("p",{staticClass:"name"},[e._v(e._s(e.user.profile.name+" "+e.user.profile.appat))]),r("p",{staticClass:"email"},[e._v(e._s(e.user.email)+" ("+e._s(e.user.range)+")")])]):e._e()],1),r("v-divider"),r("v-list",[r("v-list-tile",{attrs:{to:"/perfil"}},[r("i",{staticClass:"fa fa-user-circle mr-4 ml-2"}),r("v-list-tile-title",[e._v("Perfil")])],1),r("v-list-tile",{attrs:{to:"/guardias"}},[r("i",{staticClass:"fa fa-calendar mr-4 ml-2"}),r("v-list-tile-title",[e._v("Guardias y eventos")])],1),r("v-list-tile",{attrs:{to:"/certificados",disabled:!0}},[r("i",{staticClass:"fa fa-certificate mr-4 ml-2"}),r("v-list-tile-title",[e._v("Certificados")])],1),r("v-list-group",{attrs:{disabled:!0},scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-list-tile",[r("i",{staticClass:"fa fa-sticky-note mr-4 ml-2"}),r("v-list-tile-title",[e._v("Documentos")])],1)]},proxy:!0}])},e._l(e.doc,function(t,a){return r("v-list-tile",{key:a,attrs:{to:"/"+t}},[r("v-list-tile-title",{domProps:{textContent:e._s(t)}})],1)}),1),r("v-list-group",{attrs:{disabled:!0},scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-list-tile",[r("i",{staticClass:"fa fa-align-left mr-4 ml-2"}),r("v-list-tile-title",[e._v("Capturas")])],1)]},proxy:!0}])},e._l(e.cap,function(t,a){return r("v-list-tile",{key:a,attrs:{to:"/capturas"}},[r("v-list-tile-title",{domProps:{textContent:e._s(t)}})],1)}),1),e.groups.some(function(e){return"admin"===e})?[r("v-list-group",{scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-list-tile",[r("i",{staticClass:"fa fa-user-shield mr-4 ml-2"}),r("v-list-tile-title",[e._v("Admin")])],1)]},proxy:!0}],null,!1,219900747)},e._l(e.admin,function(t,a){return r("v-list-tile",{key:a,attrs:{to:t.route,disabled:"Usuarios"!=t.title}},[r("v-list-tile-title",{domProps:{textContent:e._s(t.title)}})],1)}),1)]:e._e()],2)],1)],1)},Ua=[],Ba={name:"App",data:function(){return{drawer:!1,left:null,items:[{title:"Ver perfil"},{title:"Cerrar sesión"}],doc:["Aviso de privacidad","Archivos generales","Cursos"],cap:["Incidentes","Reportes"],admin:[{title:"Usuarios",route:"/aprobar/usuarios"},{title:"Certificados",route:"/aprobar/certificados"}]}},computed:Object(m["a"])({},Object(h["e"])({user:"user",photo:"photo"}),Object(h["c"])({groups:"getRoles"})),methods:{logout:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("logout");case 2:e.sent,window.clearTimeout(this.timer_fn),this.$router.push("/login");case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},Ha=Ba,Ja=(a("8ed2"),a("56b0")),Xa=a("f774"),Qa=a("706c"),Wa=a("3a2f"),Ka=Object(O["a"])(Ha,Ia,Ua,!1,null,"6233a193",null),Za=Ka.exports;$()(Ka,{VAvatar:wt["a"],VBtn:te["a"],VDivider:oe["a"],VFlex:le["a"],VIcon:Et["a"],VList:de["a"],VListGroup:Ja["a"],VListTile:pe["a"],VListTileTitle:me["c"],VNavigationDrawer:Xa["a"],VSpacer:be["a"],VToolbar:Jt["a"],VToolbarItems:Xt["a"],VToolbarSideIcon:Qa["a"],VToolbarTitle:Xt["b"],VTooltip:Wa["a"]});var er=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-alert",{attrs:{value:e.appear,color:e.alertType,type:"warning",timeout:e.timeout,"multi-line":!1,dismissible:""}},[e._v("\n        "+e._s(e.message)+"\n        ")])],1)},tr=[],ar={props:{appear:{type:Boolean,default:!1},message:{type:String,required:!0},alertType:{type:String,default:"red darken-5"},timeout:{type:Number,default:4e3}},methods:{hideAlert:function(){this.$store.commit("CHANGE_ALERT",{appear:!1,type:"info",message:""})}}},rr=ar,sr=(a("d5aa"),Object(O["a"])(rr,er,tr,!1,null,null,null)),nr=sr.exports;$()(sr,{VAlert:Rt["a"]});var ir=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","justify-center":"",id:"loading"}},[a("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("v-container",{attrs:{"fill-height":""}},[a("v-layout",{attrs:{column:"","justify-center":"","align-center":""}},[a("v-progress-circular",{attrs:{indeterminate:"",size:50,width:3,color:e.progressColor}}),null!=e.message?a("h1",[e._v(e._s(e.message))]):e._e()],1)],1)],1)],1)},or=[],lr={props:{value:{type:Boolean,default:!1},message:{type:String,default:null},progressColor:{type:String,default:"white"}}},cr=lr,ur=(a("cf10"),a("490a")),dr=Object(O["a"])(cr,ir,or,!1,null,null,null),pr=dr.exports;$()(dr,{VContainer:tt["a"],VDialog:ie["a"],VLayout:ue["a"],VProgressCircular:ur["a"]});var fr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-snackbar",{attrs:{bottom:!0,"multi-line":!0,timeout:0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{"d-flex":""}},[a("span",{staticClass:"mr-1 mt-3"},[""!=e.title?a("strong",[e._v(e._s(e.title))]):e._e()]),a("p",{staticClass:"mt-3"},[e._v(e._s(e.text))]),a("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){return e.$store.commit("HIDE_TOAST")}}},[e._v("Cerrar")])],1)],1)],1)},mr=[],vr={name:"toast",props:["text","appear","timeout","color","title"],computed:{snackbar:{get:function(){return!0===this.appear},set:function(e){}}}},hr=vr,br=a("2db4"),gr=Object(O["a"])(hr,fr,mr,!1,null,"20b0afc5",null),xr=gr.exports;$()(gr,{VBtn:te["a"],VFlex:le["a"],VLayout:ue["a"],VSnackbar:br["a"]});var _r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-breadcrumbs",{attrs:{divider:"/",items:e.routes},scopedSlots:e._u([{key:"item",fn:function(t){return[a("router-link",{attrs:{to:t.item.path,tag:"li"}},[a("a",{class:[t.item.disabled&&"disabled"],staticStyle:{"text-decoration":"none"}},[e._v(e._s(e._f("caps")(t.item.text)))])])]}}])})},kr=[],yr={name:"breadcrumb",filters:{caps:function(e){return""==e?e:e[0].toUpperCase()+e.slice(1,e.length)}},computed:{routes:function(){var e=this.$route.path,t=e.split("/");t=t.slice(1,t.length);for(var a=[],r=0;r<t.length;r++)a.push({text:t[r],disabled:r==t.length-1,path:this.build_path(t.slice(0,r+1))});return a}},methods:{build_path:function(e){for(var t="",a=0;a<e.length;a++)t=t+"/"+e[a];return t}}},wr=yr,jr=(a("29d6"),a("2bc5")),Cr=Object(O["a"])(wr,_r,kr,!1,null,null,null),Vr=Cr.exports;$()(Cr,{VBreadcrumbs:jr["a"]});var Or={computed:Object(m["a"])({},Object(h["e"])({alert_state:"alert",toast:"toast",loadingPage:"loadingPage"})),created:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(""!==this.$store.state.jwt){e.next=2;break}return e.abrupt("return");case 2:if(null!==this.$store.state.photo&&0!==gt()(this.$store.state.photo).length){e.next=5;break}return e.next=5,this.$store.dispatch("fetch_photo");case 5:this.$store.dispatch("toast_me",{appear:!0,message:this.$store.state.user.profile.name.split(" ")[0]+" "+this.$store.state.user.profile.appat+"!",color:"grey darken-4",title:"¡Bievenido"});case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:Object(m["a"])({},Object(h["d"])({changeAlert:"CHANGE_ALERT"}),Object(h["b"])({apiActive:"isApiActive"}),{updateStatusAPI:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.apiActive();case 3:t=e.sent,t&&("OK"!=t.data.status?this.changeAlert({appear:!0,message:"El API está conectado pero con problemas."}):this.changeAlert({appear:!0,message:"Conectado a SUUMA API."})),e.next=12;break;case 7:e.prev=7,e.t0=e["catch"](0),a=null,a=e.t0.response?e.t0.response.data.message:"Error: No hay conexión al API.",this.changeAlert({appear:!0,message:a});case 12:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}()}),components:{"side-nav-bar":Za,"alert-nc":nr,breadcrumb:Vr,isLoading:pr,toast:xr}},Ar=Or,$r=(a("4dd1"),Object(O["a"])(Ar,za,Na,!1,null,null,null)),Rr=$r.exports;$()($r,{VContainer:tt["a"],VContent:at["a"]});var Tr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("isLoading",{attrs:{value:e.loading.appear,message:e.loading.message}}),a("alert-nc",{attrs:{appear:e.alert_state.appear,alertType:e.alert_state.type,message:e.alert_state.message,timeout:e.alert_state.timeout}}),a("router-view")],1)},Sr=[],Er={computed:Object(m["a"])({},Object(h["e"])({loading:"loadingPage",alert_state:"alert",jwt:"jwt"})),components:{"alert-nc":nr,isLoading:pr}},Mr=Er,Pr=(a("3e7e"),Object(O["a"])(Mr,Tr,Sr,!1,null,null,null)),Dr=Pr.exports;$()(Pr,{VApp:R["a"]}),r["a"].component("default-layout",Rr),r["a"].component("login-layout",Dr),r["a"].config.productionTip=!1,new r["a"]({router:qa,store:H,render:function(e){return e(S)}}).$mount("#app")},"5b6c":function(e,t,a){},"5e80":function(e,t,a){},6944:function(e,t,a){},"6a185":function(e,t,a){},"6e2a":function(e,t,a){},7247:function(e,t,a){"use strict";var r=a("adca"),s=a.n(r);s.a},"825d":function(e,t,a){"use strict";var r=a("6a185"),s=a.n(r);s.a},"89c2":function(e,t,a){e.exports=a.p+"img/NotFound.f9d9a47b.gif"},"8ed2":function(e,t,a){"use strict";var r=a("5b6c"),s=a.n(r);s.a},a163:function(e,t,a){e.exports=a.p+"img/blank.b6681619.png"},a897:function(e,t,a){},adca:function(e,t,a){},b364:function(e,t,a){},c13b:function(e,t,a){"use strict";var r=a("37db"),s=a.n(r);s.a},cf10:function(e,t,a){"use strict";var r=a("5e80"),s=a.n(r);s.a},d5aa:function(e,t,a){"use strict";var r=a("6944"),s=a.n(r);s.a},e654:function(e,t,a){},eaf7:function(e,t,a){"use strict";var r=a("b364"),s=a.n(r);s.a},f38f:function(e,t,a){}});
//# sourceMappingURL=app.8a92332d.js.map